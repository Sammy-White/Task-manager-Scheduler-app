$(document).ready(function () { $("#add-btn").click(function (t) { t.preventDefault(); let e = { description: $("#title").val() }; if ("" === e.description || null === e.description) { let t = "Field cannot be empty."; return $("#title").next("span").text(t), !1 } $.ajax({ type: "POST", url: "https://samson-task-manager.herokuapp.com/tasks", headers: { "Content-Type": "application/json", Authorization: localStorage.getItem("token") }, crossDomain: !0, cache: !1, data: JSON.stringify(e), success: function (t) { window.location.href = "/profile" }, error: function (t) { } }) }), $.ajax({ type: "GET", url: "https://samson-task-manager.herokuapp.com/tasks", headers: { "Content-Type": "application/json", Authorization: localStorage.getItem("token") }, crossDomain: !0, cache: !1, success: function (t) { let e = ""; for (let a = 0; a < t.length; a++)e += "<tr class='table-data'>", e += "<td class='title'>", e += " <p id='task' data-id=" + t[a]._id + " data-completed=" + t[a].completed + "> " + t[a].description + " </p>", e += " </td>", e += "<td class='icon'>", e += "<ul>", e += "<li id='delete' class='delete' data-id=" + t[a]._id + " ><i class='far fa-trash-alt'></i></li>", e += "<li id='edit' class='edit' data-toggle='modal' data-target='#exampleModal' data-id=" + t[a]._id + " data-description='" + t[a].description + "' data-completed=" + t[a].completed + " ><i class='fas fa-pencil-alt'></i></li>", e += " </ul>", e += "</td>", e += "</tr>"; $(".table-body").append(e) }, error: function (t) { } }), $("body").on("click", "#task", function (t) { t.preventDefault(), $(this).addClass("stroked").css("color", "red"); let e = $(this).data("id"); $.ajax({ type: "PATCH", url: "https://samson-task-manager.herokuapp.com/tasks/" + e, headers: { "Content-Type": "application/json", Authorization: localStorage.getItem("token") }, crossDomain: !0, cache: !1, data: JSON.stringify({ completed: !0 }), success: function (t) { }, error: function (t) { } }) }), $("body").on("click", "#edit", function (t) { t.preventDefault(); let e = $(this).data("id"), a = $(this).data("description"); $("#editForm").val(a), $("#editBtn").click(function (t) { t.preventDefault(); let a = { description: $("#editForm").val(), completed: !1 }; if ("" === a.description || null === a.description) { let t = "Field cannot be empty."; return $("#editForm").next("span").text(t), !1 } $.ajax({ type: "PATCH", url: "https://samson-task-manager.herokuapp.com/tasks/" + e, headers: { "Content-Type": "application/json", Authorization: localStorage.getItem("token") }, crossDomain: !0, cache: !1, data: JSON.stringify(a), success: function (t) { window.location.href = "/profile" }, error: function (t) { } }) }) }), $("body").on("click", "#delete", function (t) { t.preventDefault(), console.log($(this).data("id")); let e = $(this).data("id"); $.ajax({ type: "DELETE", url: "https://samson-task-manager.herokuapp.com/tasks/" + e, headers: { Authorization: localStorage.getItem("token") }, async: !0, timeout: 3e5, crossDomain: !0, cache: !1, success: function (t) { window.location.href = "/profile" }, error: function (t) { } }) }) });